<!DOCTYPE html>
<html lang="en">
<head>
    <title>Package Events</title>
    <!-- Copyright Embedthis Software. All Rights Reserved. -->
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <meta name="description" content="Package manager for Applications" />
    <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700|Open+Sans:300italic,400,300,700'
        rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Julius+Sans+One' rel='stylesheet' type='text/css'>
    <link href="../images/favicon.ico" rel="shortcut icon" />
    <link href="../semantic-ui/semantic.css" rel="stylesheet" type="text/css" />
    <link href="../css/api.css" rel="stylesheet" type="text/css" />
    <link href="../css/all.css" rel="stylesheet" type="text/css" />
    

</head>
<body class="show-sidebar">
        

    <div class="sidebar">
        <div class="ui large left vertical inverted labeled menu">
            <div class="item">
                <a href="../index.html" class="logo">Pak Docs</a>
            </div>
            <div class="item">
                <a href="../index.html">
                    <b>General</b>
                </a>
                <div class="menu">
                    <a class="item" href="../index.html">Pak Overview</a>
                    <a class="item" href="../users/features.html">Pak Features</a>
                    <a class="item" href="https://embedthis.com/pak/download.html">Download</a> 
                    <a class="item" href="../licensing/index.html">Licensing</a>
                </div>
            </div>
            <div class="item">
                <a href="../start/index.html">
                    <b>Getting Started</b>
                </a>
                <div class="menu">
                    <a class="item" href="../start/quick.html">Quick Start</a>
                    <a class="item" href="../start/installing.html">Installing</a>
                    <a class="item" href="../start/releaseNotes.html">Release Notes</a>
                    <a class="item" href="../start/source.html">Building from Source</a>
                </div>
            </div>
            <div class="item">
                <a href="../users/index.html"><b>User's Guide</b></a>
                <div class="menu">
                    <a class="item" href="../users/tour.html">Quick Tour</a>
                    <a class="item" href="../users/searching.html">Searching for Packages</a>
                    <a class="item" href="../users/installing.html">Installing Packages</a>
                    <a class="item" href="../users/customizing.html">Customizing Packages</a>
                    <a class="item" href="../users/versions.html">Package Versions</a>
                    <a class="item" href="../users/modes.html">Pak Modes</a>
                </div>
            </div>

            <div class="item">
                <a href="../developers/index.html"><b>Developer's Guide</b></a>
                <div class="menu">
                    <a class="item" href="../developers/creating.html">Creating Packages</a>
                    <a class="item" href="../developers/publishing.html">Publishing Packages</a>
                    <a class="item" href="../developers/events.html">Package Events</a>
                    <a class="item" href="../developers/configuration.html">Pak Configuration</a>
                </div>
            </div>
            <div class="item">
                <a href="../users/project.html">Project Resources</a>
                <div class="menu">
                    <a class="item" href="http://goo.gl/t5tTNO">Official Pak News</a>
                    <a class="item" href="https://embedthis.com/pak/">Pak Web Site</a>
                    <a class="item" href="https://embedthis.com/catalog/#/">Pak Catalog</a>
                    <a class="item" href="https://github.com/embedthis/pak">Source Code Repository</a>
                    <a class="item" href="https://github.com/embedthis/pak/issues">Project Issue Database</a>
                    <a class="item" href="https://github.com/embedthis/pak/releases">Change Log</a>
                    <a class="item" href="https://github.com/embedthis/pak/milestones">Roadmap</a>
                    <a class="item" href="https://embedthis.com/developers/contributors.html">Contributors Agreement</a>
                </div>
            </div>
            <div class="item">
                <b>Links</b>
                <div class="menu">
                    <a class="item" href="https://embedthis.com/">Embedthis Web Site</a>
                    <a class="item" href="https://embedthis.com/blog/">Embedthis Blog</a>
                    <a class="item" href="http://twitter.com/mobstream">Twitter</a>
                </div>
            </div>
        </div>
    </div>




    <div class="ui inverted masthead">
         
        <div class="ui fixed inverted menu">
            <div class="ui sidebar-launch button">
                <i class="icon list layout"></i>
            </div>
            <div class="right menu">
                  
                    <a class="item" href="https://embedthis.com/">Embedthis</a>
                    <a class="item" href="https://embedthis.com/pak/">Pak Site</a>
                    <span class="desktop-only">
                        <a class="item" href="http://goo.gl/Fg0Kf7">Pak News</a>
                        <a class="item" href="https://github.com/embedthis/pak">Repository</a>
                        <a class="item" href="https://embedthis.com/blog/">Blog</a>
                        <a class="item" href="https://twitter.com/mobstream">Twitter</a>
                    </span>

            </div>
        </div>
        
        <div class="ui breadcrumb">
            <a class="section" href="../">Home</a>
            
            <div class="divider">/</div>
            <a class="section" href="index.html">
                Developer's Guide
            </a>
            
            
            <div class="divider">/</div>
            <a class="active section" href="events.html">Package Events</a>
            
        </div>
        
        <iframe class="version desktop-only" src="../version.html"></iframe>

    </div>
    <div class="content">

            <h1>Package Events</h1>
            <p>Sometimes a package needs to perform custom actions when it is downloaded, installed, 
            or uninstalled. To support such custom actions, Pak triggers events that can be hooked 
            at various points of the package management lifecycle.</p>

            <table class="ui celled table" title="events">
                <thead>
                    <tr><th>Event</th><th>Description</th></tr>
                </thead>
                <tbody>
                    <tr><td>preinstall</td><td>Before installing and after caching package</td></tr>
                    <tr><td>preupdate</td><td>Before updating cached packages</td></tr>
                    <tr><td>preupgrade</td><td>Before upgrading installed packages</td></tr>
                    <tr><td>install</td><td>After installing files locally</td></tr>
                    <tr><td>postcache</td><td>After saving package to the cache</td></tr>
                    <tr><td>postprune</td><td>After removing a package from the cache</td></tr>
                    <tr><td>postuninstall</td><td>After uninstalling package locally</td></tr>
                    <tr><td>uninstall</td><td>Before uninstalling package locally</td></tr>
                </tbody>
            </table>

            <h2>Hooking Events</h2>
            <p>Events may be hooked by defining event scripts via the <em>pak.scripts</em> package.json property.
            Event handlers be defined inside the scripts collection. For example:</p>
            <pre class="code">"pak": {
    "scripts": {
        "postcache": {
            "script": "print('Any script in here')"
        }
    }
}
</pre>
            <h3>Literal Scripts</h3>
            <p>Each event may define a literal script or define a script filename. If the event value is a
                string, it will be interpreted as a literal script to execute. For example:</p>
            <pre class="code">"pak": {
    "scripts": {
        "postcache": "run('npm install -g babel')"
    }
}
</pre>
            <p>This is quivalent to the following:</p>
            <pre class="code">"pak": {
    "scripts": {
        "postcache": {
            "script": "run('npm install -g babel')"
        }
    }
}
</pre>
            <h3>Event Script Files</h3>
            <p>You can externalize the event script in a file by using the <em>path</em> property inside the
                event definition.</p>
            <code>"pak": {
    "scripts": {
        "postcache": {
            "path": "run('npm install -g babel')"
        }
    }
}
</code>

            <h3>MakeMe Scripts</h3>
            <p>If the script file has a <em>.me</em> extension, the script will be interpreted as a MakeMe
            build file and will be invoked with:</p>
            <pre>me -q --file PATH</pre>

            <h2>Automatic MakeMe Events</h2>
            <p>If the package does not define event handlers, but provides a MakeMe file of the same name 
            as the package: <em>NAME.me</em>, then
            then it will be invoked with the name of the event, prefixed with <em>pak-</em> as a target.</p>
            <p>For example:</p>
            <pre class="code">me -q --file PATH pak-postcache</pre>
            <p>This can be a convenient way of handling Pak events via MakeMe project files.</p> 



    </div>
    <div class="terms ui basic center aligned segment">
        <p>&copy; Embedthis Software, 2003-2015. All rights reserved.</p>
    </div>

    <script src="../jquery/jquery.min.js"></script>
    <script src="../semantic-ui/semantic.js"></script>
    <script>
        var sl = $('.sidebar-launch');
        $('.sidebar-launch').click(function() {
            var body = $('body');
            if (!body.hasClass('show-sidebar')) {
                body.addClass('show-sidebar');
                $('.sidebar').css('visibility', 'visible');
            } else {
                body.removeClass('show-sidebar');
                $('.sidebar').css('visibility', 'hidden');
            }
        });
        $('.sidebar a.item').click(function(e) {
            sessionStorage.setItem('scroll-top', $('.sidebar').scrollTop());
        });
        $(function() {
            var url = '../developers/events.html';
            var active = $('.sidebar a[href="' + url +'"]');
            active.addClass('active');
            $('.sidebar').scrollTop(sessionStorage.getItem('scroll-top'));
        });
    </script> 

        

</body>
</html>
